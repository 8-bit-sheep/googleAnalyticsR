<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Management API • googleAnalyticsR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Management API">
<meta property="og:description" content="googleAnalyticsR">
<meta property="og:image" content="https://code.markedmondson.me/googleAnalyticsR/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-43MDXK6CLZ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-43MDXK6CLZ');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">googleAnalyticsR</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/setup.html">
    <span class="fa fa-wrench"></span>
     
    Setup
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-table"></span>
     
    Reporting APIs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/reporting-ga4.html">
        <span class="fa fa-digital-tachograph"></span>
         
        GA4 Data API
      </a>
    </li>
    <li>
      <a href="../articles/measurement-protocol-v2.html">
        <span class="fa fa-upload"></span>
         
        Measurement Protocol
      </a>
    </li>
    <li>
      <a href="../articles/v4.html">
        <span class="fa fa-cogs"></span>
         
        v4 API
      </a>
    </li>
    <li>
      <a href="../articles/user-activity.html">
        <span class="fa fa-user"></span>
         
        User Activity API
      </a>
    </li>
    <li>
      <a href="../articles/v3.html">
        <span class="fa fa-cog"></span>
         
        v3 API
      </a>
    </li>
    <li>
      <a href="../articles/big-query.html">
        <span class="fa fa-search"></span>
         
        BigQuery
      </a>
    </li>
    <li>
      <a href="../articles/ganalytics.html">
        <span class="fa fa-bullseye"></span>
         
        ganalytics
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/management.html">
    <span class="fa fa-briefcase"></span>
     
    Management API
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-file"></span>
     
    Publishing
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/shiny.html">
        <span class="fa fa-cloud-upload"></span>
         
        Shiny
      </a>
    </li>
    <li>
      <a href="../articles/rmarkdown.html">
        <span class="fa fa-pencil-square"></span>
         
        RMarkdown
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-calculator"></span>
     
    Models
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/models.html">
        <span class="fa fa-calculator"></span>
         
        Creating Models
      </a>
    </li>
    <li>
      <a href="../articles/model-templates.html">
        <span class="fa fa-photo-video"></span>
         
        Shiny Model Templates
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fa fa-question-circle"></span>
     
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">
        <span class="fa fa-book-reader"></span>
         
        Function Reference
      </a>
    </li>
    <li>
      <a href="../news/index.html">
        <span class="fa fa-newspaper"></span>
         
        News
      </a>
    </li>
    <li>
      <a href="../articles/faq.html">
        <span class="fa fa-glasses"></span>
         
        FAQs
      </a>
    </li>
    <li>
      <a href="../articles/practical-tips.html">
        <span class="fa fa-bicycle"></span>
         
        Practical tips
      </a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MarkEdmondson1234/googleAnalyticsR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Management API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/MarkEdmondson1234/googleAnalyticsR/blob/HEAD/vignettes/management.Rmd" class="external-link"><code>vignettes/management.Rmd</code></a></small>
      <div class="hidden name"><code>management.Rmd</code></div>

    </div>

    
    
<p>The Management API v3 covers all API calls that are not data
reporting related and are for getting meta information about your Google
Analytics account or to change account settings.</p>
<div class="section level2">
<h2 id="account-structure">Account structure<a class="anchor" aria-label="anchor" href="#account-structure"></a>
</h2>
<p>Shows the details for your account structure
(<code>Accounts &gt; Web-properties &gt; Views (profiles)</code>)
including creation time, user permissions etc.</p>
<p>The most day-to-day useful function is <code><a href="../reference/ga_account_list.html">ga_account_list()</a></code>
which summarises all account web properties and views available to your
user.</p>
<ul>
<li>
<code><a href="../reference/ga_account_list.html">ga_account_list()</a></code> - Get account summary including the
ViewId</li>
<li>
<code><a href="../reference/ga_accounts.html">ga_accounts()</a></code> - Get account metadata for your user</li>
<li>
<code><a href="../reference/ga_webproperty.html">ga_webproperty()</a></code> - Get web property</li>
<li>
<code><a href="../reference/ga_webproperty_list.html">ga_webproperty_list()</a></code> - List web properties for a
particular accountId</li>
<li>
<code><a href="../reference/ga_view.html">ga_view()</a></code> - Get single View (Profile)</li>
<li>
<code><a href="../reference/ga_view_list.html">ga_view_list()</a></code> - List Views (Profile) for a particular
accountId/webPropertyId</li>
</ul>
<p>You can then also get the meta-data for that particular entity via
<code><a href="../reference/ga_webproperty.html">ga_webproperty()</a></code> or <code><a href="../reference/ga_view.html">ga_view()</a></code></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ga_account_list is most commonly used</span></span>
<span><span class="co"># (restricted to top 10 with the head() function)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/ga_account_list.html">ga_account_list</a></span><span class="op">(</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 10 x 11</span></span>
<span><span class="co">##    accountId accountName internalWebProp… level websiteUrl type  starred</span></span>
<span><span class="co">##    &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt; &lt;lgl&gt;  </span></span>
<span><span class="co">##  1 79301104  cloudyr     118427305        STAN… http://cl… WEB   NA     </span></span>
<span><span class="co">##  2 54516992  Demo Accou… 87479473         STAN… https://s… WEB   NA     </span></span>
<span><span class="co">##  3 54516992  Demo Accou… 87479473         STAN… https://s… WEB   NA     </span></span>
<span><span class="co">##  4 54516992  Demo Accou… 87479473         STAN… https://s… WEB   NA     </span></span>
<span><span class="co">##  5 47480439  MarkEdmond… 78737968         STAN… http://ma… WEB   NA     </span></span>
<span><span class="co">##  6 47480439  MarkEdmond… 78742336         STAN… http://ma… WEB   NA     </span></span>
<span><span class="co">##  7 54019251  Sunholo We… 86845257         STAN… https://g… WEB   NA     </span></span>
<span><span class="co">##  8 54019251  Sunholo We… 86845257         STAN… https://g… WEB   NA     </span></span>
<span><span class="co">##  9 54019251  Sunholo We… 94325478         PREM… http://ma… WEB   NA     </span></span>
<span><span class="co">## 10 54019251  Sunholo We… 94325478         PREM… http://ma… WEB   TRUE   </span></span>
<span><span class="co">## # … with 4 more variables: webPropertyId &lt;chr&gt;, webPropertyName &lt;chr&gt;, viewId &lt;chr&gt;,</span></span>
<span><span class="co">## #   viewName &lt;chr&gt;</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this only lists account meta-data</span></span>
<span><span class="fu"><a href="../reference/ga_accounts.html">ga_accounts</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##         id             name             created             updated</span></span>
<span><span class="co">## 1 47480439    MarkEdmondson 2014-01-25 12:17:05 2019-06-01 08:09:58</span></span>
<span><span class="co">## 2 54019251 Sunholo Websites 2014-08-20 19:17:05 2019-07-31 18:51:55</span></span>
<span><span class="co">## 3 54516992     Demo Account 2014-09-06 17:53:33 2019-06-10 17:56:03</span></span>
<span><span class="co">## 4 79301104          cloudyr 2016-06-14 14:29:50 2016-06-14 14:29:50</span></span>
<span><span class="co">##                            permissions.effective</span></span>
<span><span class="co">## 1 COLLABORATE,EDIT,MANAGE_USERS,READ_AND_ANALYZE</span></span>
<span><span class="co">## 2 COLLABORATE,EDIT,MANAGE_USERS,READ_AND_ANALYZE</span></span>
<span><span class="co">## 3                               READ_AND_ANALYZE</span></span>
<span><span class="co">## 4</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this gives meta-data for all web-properties for this accountId</span></span>
<span><span class="fu"><a href="../reference/ga_webproperty_list.html">ga_webproperty_list</a></span><span class="op">(</span><span class="fl">47480439</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##              id accountId internalWebPropertyId                name</span></span>
<span><span class="co">## 1 UA-47480439-1  47480439              78742336    markedmondson.me</span></span>
<span><span class="co">## 2 UA-47480439-2  47480439              78737968 MarkEdmondson oldGA</span></span>
<span><span class="co">##                websiteUrl    level profileCount    industryVertical dataRetentionTtl</span></span>
<span><span class="co">## 1 http://markedmondson.me STANDARD            1 HOBBIES_AND_LEISURE        MONTHS_26</span></span>
<span><span class="co">## 2 http://markedmondson.me STANDARD            1 HOBBIES_AND_LEISURE       INDEFINITE</span></span>
<span><span class="co">##   dataRetentionResetOnNewActivity             created             updated</span></span>
<span><span class="co">## 1                            TRUE 2014-01-25 12:17:05 2014-01-25 12:17:06</span></span>
<span><span class="co">## 2                            TRUE 2014-01-25 12:19:20 2018-04-12 11:37:38</span></span>
<span><span class="co">##   defaultProfileId                          permissions.effective</span></span>
<span><span class="co">## 1             &lt;NA&gt; COLLABORATE,EDIT,MANAGE_USERS,READ_AND_ANALYZE</span></span>
<span><span class="co">## 2         81416156 COLLABORATE,EDIT,MANAGE_USERS,READ_AND_ANALYZE</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this is meta-data for one particular web-property</span></span>
<span><span class="fu"><a href="../reference/ga_webproperty.html">ga_webproperty</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-1"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "UA-47480439-1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $kind</span></span>
<span><span class="co">## [1] "analytics#webproperty"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $selfLink</span></span>
<span><span class="co">## [1] "https://www.googleapis.com/analytics/v3/management/accounts/47480439/webproperties/UA-47480439-1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $accountId</span></span>
<span><span class="co">## [1] "47480439"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $internalWebPropertyId</span></span>
<span><span class="co">## [1] "78742336"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $name</span></span>
<span><span class="co">## [1] "markedmondson.me"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $websiteUrl</span></span>
<span><span class="co">## [1] "http://markedmondson.me"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $level</span></span>
<span><span class="co">## [1] "STANDARD"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $profileCount</span></span>
<span><span class="co">## [1] 1</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $industryVertical</span></span>
<span><span class="co">## [1] "HOBBIES_AND_LEISURE"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $dataRetentionTtl</span></span>
<span><span class="co">## [1] "MONTHS_26"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $dataRetentionResetOnNewActivity</span></span>
<span><span class="co">## [1] TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $permissions</span></span>
<span><span class="co">## $permissions$effective</span></span>
<span><span class="co">## [1] "COLLABORATE"      "EDIT"             "MANAGE_USERS"     "READ_AND_ANALYZE"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $created</span></span>
<span><span class="co">## [1] "2014-01-25T12:17:05.492Z"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $updated</span></span>
<span><span class="co">## [1] "2014-01-25T12:17:06.625Z"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $parentLink</span></span>
<span><span class="co">## $parentLink$type</span></span>
<span><span class="co">## [1] "analytics#account"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $parentLink$href</span></span>
<span><span class="co">## [1] "https://www.googleapis.com/analytics/v3/management/accounts/47480439"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $childLink</span></span>
<span><span class="co">## $childLink$type</span></span>
<span><span class="co">## [1] "analytics#profiles"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $childLink$href</span></span>
<span><span class="co">## [1] "https://www.googleapis.com/analytics/v3/management/accounts/47480439/webproperties/UA-47480439-1/profiles"</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this is meta-data for the views under this accountId/webPropertyId</span></span>
<span><span class="fu"><a href="../reference/ga_view_list.html">ga_view_list</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-1"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##         id accountId webPropertyId internalWebPropertyId              name currency</span></span>
<span><span class="co">## 1 81416941  47480439 UA-47480439-1              78742336 All Web Site Data      USD</span></span>
<span><span class="co">##            timezone              websiteUrl type             created</span></span>
<span><span class="co">## 1 Europe/Copenhagen http://markedmondson.me  WEB 2014-01-25 12:17:05</span></span>
<span><span class="co">##               updated eCommerceTracking</span></span>
<span><span class="co">## 1 2015-06-14 13:18:53             FALSE</span></span>
<span><span class="co">##                            permissions.effective</span></span>
<span><span class="co">## 1 COLLABORATE,EDIT,MANAGE_USERS,READ_AND_ANALYZE</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this is meta-data for this particular viewId (profileId)</span></span>
<span><span class="fu"><a href="../reference/ga_view.html">ga_view</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-1"</span>, profileId <span class="op">=</span> <span class="fl">81416941</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $id</span></span>
<span><span class="co">## [1] "81416941"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $kind</span></span>
<span><span class="co">## [1] "analytics#profile"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $selfLink</span></span>
<span><span class="co">## [1] "https://www.googleapis.com/analytics/v3/management/accounts/47480439/webproperties/UA-47480439-1/profiles/81416941"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $accountId</span></span>
<span><span class="co">## [1] "47480439"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $webPropertyId</span></span>
<span><span class="co">## [1] "UA-47480439-1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $internalWebPropertyId</span></span>
<span><span class="co">## [1] "78742336"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $name</span></span>
<span><span class="co">## [1] "All Web Site Data"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $currency</span></span>
<span><span class="co">## [1] "USD"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $timezone</span></span>
<span><span class="co">## [1] "Europe/Copenhagen"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $websiteUrl</span></span>
<span><span class="co">## [1] "http://markedmondson.me"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $type</span></span>
<span><span class="co">## [1] "WEB"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $permissions</span></span>
<span><span class="co">## $permissions$effective</span></span>
<span><span class="co">## [1] "COLLABORATE"      "EDIT"             "MANAGE_USERS"     "READ_AND_ANALYZE"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $created</span></span>
<span><span class="co">## [1] "2014-01-25T12:17:05.492Z"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $updated</span></span>
<span><span class="co">## [1] "2015-06-14T13:18:53.638Z"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $eCommerceTracking</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $parentLink</span></span>
<span><span class="co">## $parentLink$type</span></span>
<span><span class="co">## [1] "analytics#webproperty"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $parentLink$href</span></span>
<span><span class="co">## [1] "https://www.googleapis.com/analytics/v3/management/accounts/47480439/webproperties/UA-47480439-1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $childLink</span></span>
<span><span class="co">## $childLink$type</span></span>
<span><span class="co">## [1] "analytics#goals"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $childLink$href</span></span>
<span><span class="co">## [1] "https://www.googleapis.com/analytics/v3/management/accounts/47480439/webproperties/UA-47480439-1/profiles/81416941/goals"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="helper-functions">Helper functions<a class="anchor" aria-label="anchor" href="#helper-functions"></a>
</h2>
<p>These are helper utility functions to work with Google Analytics
data.</p>
<ul>
<li>
<code><a href="../reference/ga_meta.html">ga_meta()</a></code> - get a data.frame of available dimensions
and metrics, or just use <code>meta</code> directly to get the version
that comes with the library.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you can just use `meta` as is to get the available metrics,</span></span>
<span><span class="co"># here we just return the first 5 columns and rows for brevity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">meta</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                      name      type dataType group     status</span></span>
<span><span class="co">## 1             ga:userType DIMENSION   STRING  User     PUBLIC</span></span>
<span><span class="co">## 2          ga:visitorType DIMENSION   STRING  User DEPRECATED</span></span>
<span><span class="co">## 3         ga:sessionCount DIMENSION   STRING  User     PUBLIC</span></span>
<span><span class="co">## 4           ga:visitCount DIMENSION   STRING  User DEPRECATED</span></span>
<span><span class="co">## 5 ga:daysSinceLastSession DIMENSION   STRING  User     PUBLIC</span></span>
<span><span class="co">## 6     ga:userDefinedValue DIMENSION   STRING  User     PUBLIC</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># or ensure an up to date version by calling the metadata API.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="../reference/ga_meta.html">ga_meta</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">##                      name      type dataType group     status</span></span>
<span><span class="co">## 1             ga:userType DIMENSION   STRING  User     PUBLIC</span></span>
<span><span class="co">## 2          ga:visitorType DIMENSION   STRING  User DEPRECATED</span></span>
<span><span class="co">## 3         ga:sessionCount DIMENSION   STRING  User     PUBLIC</span></span>
<span><span class="co">## 4           ga:visitCount DIMENSION   STRING  User DEPRECATED</span></span>
<span><span class="co">## 5 ga:daysSinceLastSession DIMENSION   STRING  User     PUBLIC</span></span>
<span><span class="co">## 6     ga:userDefinedValue DIMENSION   STRING  User     PUBLIC</span></span></code></pre>
<ul>
<li>
<code>ga_aggregate</code> - aggregate data down to the dimensions
you specify, treating metrics correctly regarding if they should be
averaged or summed. This is used internally when using anti-sampling,
and is also useful to respond to dimension selections in Shiny
dashboards, where you don’t want to perform a new API call each time you
need aggregated data. Download all data first in a more unaggregated
form, then use this function.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># use `aggregateGAData` so you can on the fly create summary data</span></span>
<span><span class="va">ga_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/google_analytics.html">google_analytics</a></span><span class="op">(</span><span class="fl">81416156</span>, </span>
<span>                            date_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"10daysAgo"</span>, <span class="st">"yesterday"</span><span class="op">)</span>,</span>
<span>                            metrics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sessions"</span>,<span class="st">"bounceRate"</span><span class="op">)</span>, dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hour"</span>,<span class="st">"date"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [36mℹ[39m 2020-05-26 11:40:05 &gt; Downloaded [ 240 ] rows from a total of [ 240 ].</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ga_data</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   hour       date sessions bounceRate</span></span>
<span><span class="co">## 1   00 2020-05-16       10   60.00000</span></span>
<span><span class="co">## 2   00 2020-05-17        8   37.50000</span></span>
<span><span class="co">## 3   00 2020-05-18        9   44.44444</span></span>
<span><span class="co">## 4   00 2020-05-19        8   50.00000</span></span>
<span><span class="co">## 5   00 2020-05-20       11   63.63636</span></span>
<span><span class="co">## 6   00 2020-05-21        8   50.00000</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if we want totals per hour over the dates:</span></span>
<span><span class="fu"><a href="../reference/ga_aggregate.html">ga_aggregate</a></span><span class="op">(</span><span class="va">ga_data</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hour"</span>,<span class="st">"sessions"</span><span class="op">)</span><span class="op">]</span>, agg_names <span class="op">=</span> <span class="st">"hour"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 24 x 2</span></span>
<span><span class="co">##    hour  sessions</span></span>
<span><span class="co">##    &lt;chr&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">##  1 00          92</span></span>
<span><span class="co">##  2 01          64</span></span>
<span><span class="co">##  3 02          58</span></span>
<span><span class="co">##  4 03          64</span></span>
<span><span class="co">##  5 04          70</span></span>
<span><span class="co">##  6 05          74</span></span>
<span><span class="co">##  7 06          59</span></span>
<span><span class="co">##  8 07          66</span></span>
<span><span class="co">##  9 08          82</span></span>
<span><span class="co">## 10 09          89</span></span>
<span><span class="co">## # … with 14 more rows</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># it knows not to sum metrics that are rates:</span></span>
<span><span class="fu"><a href="../reference/ga_aggregate.html">ga_aggregate</a></span><span class="op">(</span><span class="va">ga_data</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hour"</span>,<span class="st">"bounceRate"</span><span class="op">)</span><span class="op">]</span>, agg_names <span class="op">=</span> <span class="st">"hour"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 24 x 2</span></span>
<span><span class="co">##    hour  bounceRate</span></span>
<span><span class="co">##    &lt;chr&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">##  1 00          53.4</span></span>
<span><span class="co">##  2 01          65.1</span></span>
<span><span class="co">##  3 02          69.3</span></span>
<span><span class="co">##  4 03          60.5</span></span>
<span><span class="co">##  5 04          65.4</span></span>
<span><span class="co">##  6 05          79.9</span></span>
<span><span class="co">##  7 06          78.8</span></span>
<span><span class="co">##  8 07          66.1</span></span>
<span><span class="co">##  9 08          75.4</span></span>
<span><span class="co">## 10 09          66.3</span></span>
<span><span class="co">## # … with 14 more rows</span></span></code></pre>
<ul>
<li>
<code><a href="../reference/ga_allowed_metric_dim.html">ga_allowed_metric_dim()</a></code> - Create named list of allowed
GA metrics/dimensions. This is useful to have nice looking labels for
dimension and metric selection pickers, or to create lookup tables.</li>
</ul>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">amd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_allowed_metric_dim.html">ga_allowed_metric_dim</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">amd</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                   Users               New Users          % New Sessions </span></span>
<span><span class="co">##              "ga:users"           "ga:newUsers" "ga:percentNewSessions" </span></span>
<span><span class="co">##      1 Day Active Users      7 Day Active Users     14 Day Active Users </span></span>
<span><span class="co">##          "ga:1dayUsers"          "ga:7dayUsers"         "ga:14dayUsers"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="user-management">User management<a class="anchor" aria-label="anchor" href="#user-management"></a>
</h2>
<ul>
<li>
<code><a href="../reference/ga_users_list.html">ga_users_list()</a></code> - list user access to your Google
Analytics accounts, web properties or views</li>
<li>
<code><a href="../reference/ga_users_delete.html">ga_users_delete()</a></code> - delete user access via email</li>
<li>
<code><a href="../reference/ga_users_delete_linkid.html">ga_users_delete_linkid()</a></code> - delete user access via the
linkId</li>
<li>
<code><a href="../reference/ga_users_add.html">ga_users_add()</a></code> - add users to accounts</li>
<li>
<code><a href="../reference/ga_users_update.html">ga_users_update()</a></code> - update a user</li>
</ul>
<p>User management follows the recommended workflows outlined in this <a href="https://developers.google.com/analytics/devguides/config/mgmt/v3/user-management" class="external-link">Google
reference article</a>.</p>
<p>The <code>ga_users_*</code> functions use the management APIs
batching endpoint, to take advantage of the special increased quota
limits when dealing with User management that API offers. For example,
every 30 API calls that are batched that deal with user management only
increments one API call against your management API quota. You can have
300 API calls in one batch (e.g. that costs 10 API calls against the
quota), and <code>googleAnalyticsR</code> will split any list of emails
into 300 emails per batch for you, so you can send in all emails you
have.</p>
<p>By default, each Google Cloud Project gets 50 write requests per
project per day, which if using batching means 1500 write/delete/update
user operations per day.</p>
<blockquote>
<p>You will need to use your own Google Cloud Platform project if using
any write API operations seriously, otherwise you will be at the mercy
of the shared googleAnalyticsR’s quota limits. See the section in the
Setup page on how to <a href="http://code.markedmondson.me/googleAnalyticsR/articles/setup.html#your-own-google-project" class="external-link">setup
using your own Google Project</a></p>
</blockquote>
<p>To see which users are attached, use <code><a href="../reference/ga_users_list.html">ga_users_list()</a></code>.
Each user email is referenced under the <code>userRef.email</code>
column, whereas the unique IDs used to see which user is linked to where
is the <code>linkId</code> which is unique to each user and link to your
account, web property or view/profile.</p>
<p>Users can be attached at various levels in the hierarchy so you can
call the function at various viewing angles.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># default will list all users that match the id you supply</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-2"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-2"</span>, viewId <span class="op">=</span> <span class="fl">81416156</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># only list users who have account level access</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="cn">NULL</span>, viewId <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co"># only list users who have webProperty and above access</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-2"</span>, viewId <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p>Users can be attached at account, web-property and view level.</p>
<p>Batching is incorporated for adding users, so you can pass in a
vector of emails to add.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ga_users_add.html">ga_users_add</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"the_email@company.com"</span>, <span class="st">"another_email@company.com"</span><span class="op">)</span>, </span>
<span>             permissions <span class="op">=</span> <span class="st">"EDIT"</span>, accountId <span class="op">=</span> <span class="fl">47480439</span><span class="op">)</span></span></code></pre></div>
<p>To delete a user from all accounts, web-properties and views takes a
few API calls to <code><a href="../reference/ga_users_list.html">ga_users_list()</a></code> to find all the possible
links, which is done behind the scenes of
<code><a href="../reference/ga_users_delete.html">ga_users_delete()</a></code>. You can pass the function multiple
emails to delete many at once, which is done via batching:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ga_users_delete.html">ga_users_delete</a></span><span class="op">(</span><span class="st">"the_email@company.com"</span>, <span class="fl">47480439</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># delete many emails at once</span></span>
<span><span class="fu"><a href="../reference/ga_users_delete.html">ga_users_delete</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"the_email@company.com"</span>, <span class="st">"another_email@company.com"</span><span class="op">)</span>, accountId <span class="op">=</span> <span class="fl">47480439</span><span class="op">)</span></span></code></pre></div>
<p>For more fine grained control, the below examples shows a workflow to
list and delete user access for one user at View level using the
linkId.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get the linkId for the user you want to delete</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-2"</span>, viewId <span class="op">=</span> <span class="fl">81416156</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ga_users_delete_linkid.html">ga_users_delete_linkid</a></span><span class="op">(</span><span class="st">"81416156:114834495587136933146"</span>, <span class="fl">47480439</span>, </span>
<span>                webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-2"</span>, viewId <span class="op">=</span> <span class="fl">81416156</span><span class="op">)</span></span>
<span> </span>
<span><span class="co"># check its gone</span></span>
<span><span class="fu"><a href="../reference/ga_users_list.html">ga_users_list</a></span><span class="op">(</span><span class="fl">47480439</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-47480439-2"</span>, viewId <span class="op">=</span> <span class="fl">81416156</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># can only delete at level user has access, the above deletion woud have failed if via:</span></span>
<span><span class="fu"><a href="../reference/ga_users_delete_linkid.html">ga_users_delete_linkid</a></span><span class="op">(</span><span class="st">"47480439:114834495587136933146"</span>, <span class="fl">47480439</span><span class="op">)</span></span></code></pre></div>
<p>You can also modify existing users via <code><a href="../reference/ga_users_update.html">ga_users_update()</a></code>
- the below modifies on the web property level:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># the update to perform</span></span>
<span><span class="va">o</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>permissions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>local <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"EDIT"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ga_users_update.html">ga_users_update</a></span><span class="op">(</span><span class="st">"UA-123456-1:1111222233334444"</span>,</span>
<span>                update_object <span class="op">=</span> <span class="va">o</span>,</span>
<span>                accountId <span class="op">=</span> <span class="fl">123456</span>,</span>
<span>                webPropertyId <span class="op">=</span> <span class="st">"UA-123456-1"</span><span class="op">)</span></span></code></pre></div>
<p>When using linkIds, make sure to use the correct <code>linkId</code>
for the level of account, web-property or view you are operating on -
the <code>linkId</code> starts with the accountId, UA code of web
property, or ViewId number to distinguish between the various types.</p>
</div>
<div class="section level2">
<h2 id="custom-variables">Custom variables<a class="anchor" aria-label="anchor" href="#custom-variables"></a>
</h2>
<p>Custom variable management for a Google Analytics property.</p>
<ul>
<li>
<code><a href="../reference/ga_custom_vars.html">ga_custom_vars()</a></code> - get meta data for a specific custom
variable</li>
<li>
<code><a href="../reference/ga_custom_vars_list.html">ga_custom_vars_list()</a></code> - list all custom dimensions or
metrics</li>
<li>
<code><a href="../reference/ga_custom_vars_create.html">ga_custom_vars_create()</a></code> - create a new custom
variable</li>
<li>
<code><a href="../reference/ga_custom_vars_patch.html">ga_custom_vars_patch()</a></code> - update an existing custom
variable</li>
</ul>
<p>Using these you can scale setting up custom dimensions across your
Google Analytics web properties. Custom dimension updates are governed
by the same rules as when you create them in the web interface, as this
<a href="https://support.google.com/analytics/answer/2709828" class="external-link">Google
article on custom dimensions and metrics explains</a>.</p>
<p>You can’t delete custom dimensions, you can only de-activate them for
reuse later on.</p>
<p>A workflow is shown below that creates, then updates a custom
variable to a new name.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create custom var</span></span>
<span><span class="fu"><a href="../reference/ga_custom_vars_create.html">ga_custom_vars_create</a></span><span class="op">(</span><span class="st">"my_custom_dim"</span>,</span>
<span>                      index <span class="op">=</span> <span class="fl">15</span>,</span>
<span>                      accountId <span class="op">=</span> <span class="fl">54019251</span>,</span>
<span>                      webPropertyId <span class="op">=</span> <span class="st">"UA-54019251-4"</span>,</span>
<span>                      scope <span class="op">=</span> <span class="st">"HIT"</span>,</span>
<span>                      active <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view custom dimension in list</span></span>
<span><span class="fu"><a href="../reference/ga_custom_vars_list.html">ga_custom_vars_list</a></span><span class="op">(</span><span class="fl">54019251</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-54019251-4"</span>, type <span class="op">=</span> <span class="st">"customDimensions"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># change a custom dimension</span></span>
<span><span class="fu"><a href="../reference/ga_custom_vars_patch.html">ga_custom_vars_patch</a></span><span class="op">(</span><span class="st">"ga:dimension7"</span>,</span>
<span>                     accountId <span class="op">=</span> <span class="fl">54019251</span>,</span>
<span>                     webPropertyId <span class="op">=</span> <span class="st">"UA-54019251-4"</span>,</span>
<span>                     name <span class="op">=</span> <span class="st">"my_custom_dim2"</span>,</span>
<span>                     scope <span class="op">=</span> <span class="st">"SESSION"</span>,</span>
<span>                     active <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># view custom dimensions again to see change</span></span>
<span><span class="fu"><a href="../reference/ga_custom_vars_list.html">ga_custom_vars_list</a></span><span class="op">(</span><span class="fl">54019251</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-54019251-4"</span>, type <span class="op">=</span> <span class="st">"customDimensions"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adwords">AdWords<a class="anchor" aria-label="anchor" href="#adwords"></a>
</h2>
<ul>
<li>
<code><a href="../reference/ga_adwords.html">ga_adwords()</a></code> Get Google Analytics - AdWords Link meta
data</li>
<li>
<code><a href="../reference/ga_adwords_list.html">ga_adwords_list()</a></code> List AdWords</li>
<li>
<code><a href="../reference/ga_adwords_add_linkid.html">ga_adwords_add_linkid()</a></code> Create a link between and
Adwords (Google ads) account and a Google Analytics property</li>
<li>
<code><a href="../reference/ga_adwords_delete_linkid.html">ga_adwords_delete_linkid()</a></code> Delete a Google Analytics
webProperty-Google Ads link</li>
</ul>
<p>For many websites Google search advertising, aka Adwords, is a key
traffic channel which comes with its own reporting system. Linking
Google Analytics with Adwords makes sense as it allows Google ads data
to be included in Analytics reports and vice versa. For instance linking
the two together can add to the Analytics reports more than 30 metrics
and dimensions related to ads (such as the keywords that triggered an ad
or the ad ROI) You can use the function <code><a href="../reference/ga_adwords_list.html">ga_adwords_list()</a></code>
to request a list of existing links between Google Analytics and Adwords
associated with your user. The <code><a href="../reference/ga_adwords.html">ga_adwords()</a></code> function
provides meta data about a specific Google Analytics - Adwords link.</p>
<p>If a link between Analytics and Google ads has not been established,
this can be done easily via the Management API using the
<code><a href="../reference/ga_adwords_add_linkid.html">ga_adwords_add_linkid()</a></code> function. A requirement is that
your email has access rights to both the Analytics and Adwords account.
You will also need the Adwords customer ID which can be obtained via the
Adwords API or UI. Also required is the id of the Google Analytics
account and associated GA property to which the Adwords account will be
linked. This operation will create a new entityAdWordsLinks resource. To
remove this entityAdWordsLinks later if needed the
<code><a href="../reference/ga_adwords_delete_linkid.html">ga_adwords_delete_linkid()</a></code> function can be used.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Lists webProperty-Google Ads links</span></span>
<span><span class="fu"><a href="../reference/ga_adwords_list.html">ga_adwords_list</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">65973592</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-65973592-1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get information about a web property-Google Ads link </span></span>
<span><span class="fu"><a href="../reference/ga_adwords.html">ga_adwords</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">65973592</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-65973592-1"</span>, webPropertyAdWordsLinkId <span class="op">=</span> <span class="st">"QrcfI2DTSMayqbrLiHYUqw"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># establish a new link between GA and Adwords</span></span>
<span><span class="fu"><a href="../reference/ga_adwords_add_linkid.html">ga_adwords_add_linkid</a></span><span class="op">(</span>adwordsAccountId <span class="op">=</span> <span class="st">"280-234-7592"</span>, linkName <span class="op">=</span> <span class="st">"Google Ads Link"</span>, accountId <span class="op">=</span> <span class="st">"65973592"</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-65973592-1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check that it has been added</span></span>
<span><span class="fu"><a href="../reference/ga_adwords_list.html">ga_adwords_list</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">65973592</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-65973592-1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># delete the link</span></span>
<span><span class="fu"><a href="../reference/ga_adwords_delete_linkid.html">ga_adwords_delete_linkid</a></span><span class="op">(</span>accountId  <span class="op">=</span> <span class="fl">65973592</span>, webPropertyId <span class="op">=</span><span class="st">"UA-65973592-1"</span>, webPropertyAdWordsLinkId <span class="op">=</span> <span class="st">"ezW2dyaiQcGheWRAo69nCw"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#check that the link has been removed</span></span>
<span><span class="fu"><a href="../reference/ga_adwords_list.html">ga_adwords_list</a></span><span class="op">(</span>accountId <span class="op">=</span> <span class="fl">65973592</span>, webPropertyId <span class="op">=</span> <span class="st">"UA-65973592-1"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="custom-data-sources">Custom Data Sources<a class="anchor" aria-label="anchor" href="#custom-data-sources"></a>
</h2>
<p>See and upload custom data sources to Google Analytics</p>
<ul>
<li>
<code><a href="../reference/ga_custom_datasource.html">ga_custom_datasource()</a></code> - List Custom Data Sources</li>
<li>
<code><a href="../reference/ga_custom_upload.html">ga_custom_upload()</a></code> - Custom Data Source Upload
Status</li>
<li>
<code><a href="../reference/ga_custom_upload_file.html">ga_custom_upload_file()</a></code>- Upload a file to GA custom
uploads</li>
<li>
<code><a href="../reference/ga_custom_upload_list.html">ga_custom_upload_list()</a></code> - List the files in a GA custom
upload</li>
</ul>
</div>
<div class="section level2">
<h2 id="experiments">Experiments<a class="anchor" aria-label="anchor" href="#experiments"></a>
</h2>
<ul>
<li>
<code><a href="../reference/ga_experiment.html">ga_experiment()</a></code> - Experiments Meta data</li>
<li>
<code><a href="../reference/ga_experiment_list.html">ga_experiment_list()</a></code> - List Experiments</li>
</ul>
</div>
<div class="section level2">
<h2 id="view-filters">View Filters<a class="anchor" aria-label="anchor" href="#view-filters"></a>
</h2>
<p>The filter edit functions are contributed by <span class="citation">@zselinger</span> which allow you to update filters for
your Google Analytics views at scale.</p>
<ul>
<li>
<code><a href="../reference/ga_filter.html">ga_filter()</a></code> - Get specific filter for account</li>
<li>
<code><a href="../reference/ga_filter_add.html">ga_filter_add()</a></code> - Create a new filter and add it to the
view (optional).</li>
<li>
<code><a href="../reference/ga_filter_apply_to_view.html">ga_filter_apply_to_view()</a></code> - Apply an existing filter to
view.</li>
<li>
<code><a href="../reference/ga_filter_delete.html">ga_filter_delete()</a></code> - Delete a filter from account or
remove from view.</li>
<li>
<code><a href="../reference/ga_filter_list.html">ga_filter_list()</a></code> - List filters for account</li>
<li>
<code><a href="../reference/ga_filter_update.html">ga_filter_update()</a></code> - Updates an existing filter.</li>
<li>
<code><a href="../reference/ga_filter_update_filter_link.html">ga_filter_update_filter_link()</a></code> - Update an existing
profile filter link. Patch semantics supported</li>
<li>
<code><a href="../reference/ga_filter_view.html">ga_filter_view()</a></code> - Get specific filter for view
(profile)</li>
<li>
<code><a href="../reference/ga_filter_view_list.html">ga_filter_view_list()</a></code> - List filters for view
(profile)</li>
</ul>
</div>
<div class="section level2">
<h2 id="goals">Goals<a class="anchor" aria-label="anchor" href="#goals"></a>
</h2>
<ul>
<li>
<code><a href="../reference/ga_goal.html">ga_goal()</a></code> - Get goal</li>
<li>
<code><a href="../reference/ga_goal_list.html">ga_goal_list()</a></code> - List goals</li>
<li>
<code><a href="../reference/ga_goal_add.html">ga_goal_add()</a></code> - Create and add Goals to a web
property</li>
<li>
<code><a href="../reference/ga_goal_update.html">ga_goal_update()</a></code> - Modify an existing goal</li>
</ul>
</div>
<div class="section level2">
<h2 id="example-copying-ga-goals">Example: Copying GA goals<a class="anchor" aria-label="anchor" href="#example-copying-ga-goals"></a>
</h2>
<p>We can programatically copy goal configurations from any GA view (the
source) to another GA view (the destination) within an entirely separate
property. This can be helpful to maintain standardised goal
configurations for multiple properties, and also for GA migrations.</p>
<p>This example will first copy a single goal from one property to
another, then use the <a href="https://purrr.tidyverse.org/reference/map.html" class="external-link"><code>map()</code></a>
function from <code>purrr</code> to copy multiple goals at once.</p>
<p>We use the Google Analytics demo account as the source view for this
example - you can <a href="https://support.google.com/analytics/answer/6367342?hl=en" class="external-link">read
more about the demo account here</a>.</p>
</div>
<div class="section level2">
<h2 id="auth-and-setup">Auth and setup<a class="anchor" aria-label="anchor" href="#auth-and-setup"></a>
</h2>
<p>We authenticate and load the necessary packages, following the
instructions from the <a href="http://code.markedmondson.me/googleAnalyticsR/articles/setup.html#choose-authentication-method" class="external-link">documentation</a>.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://renkun-ken.github.io/rlist/" class="external-link">rlist</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in library(rlist): there is no package called 'rlist'</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="copying-a-single-goal">Copying a single goal<a class="anchor" aria-label="anchor" href="#copying-a-single-goal"></a>
</h2>
<p>For this first section, we copy a single Goal from one view to
another. To achieve this, we will:</p>
<ol style="list-style-type: decimal">
<li>Retrieve the accountId, webPropertyId and viewId from our
<strong>source</strong> GA view (the one where our goal to be copied
over currently exists).</li>
<li>Get a list of the goals currently configured in the source GA
view.</li>
<li>Retrieve the accountId, webPropertyId and viewId from our
<strong>destination</strong> GA view (the one where our goal will be
copied <strong>to</strong>).</li>
<li>Get the configuration details of a single goal to be copied.</li>
<li>Submit the goal details to our destination property.</li>
</ol>
<div class="section level3">
<h3 id="retrieve-the-accountid-webpropertyid-and-viewid-from-our-source-ga-view">1. Retrieve the accountId, webPropertyId and viewId from our source
GA view<a class="anchor" aria-label="anchor" href="#retrieve-the-accountid-webpropertyid-and-viewid-from-our-source-ga-view"></a>
</h3>
<p>We use the <code><a href="../reference/ga_account_list.html">ga_account_list()</a></code> function, which returns an
account summary for all available accounts as a dataframe. Then, we
filter the dataframe down to a specific account and view name using the
<code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code> and <code><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect()</a></code> functions from the
tidyverse.</p>
<p>You can supply your own filter conditions as necessary, to locate
your desired view information.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Account info and list of goals for source, to be copied</span></span>
<span><span class="va">source_account</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_account_list.html">ga_account_list</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">accountName</span>, <span class="st">"Demo Account"</span><span class="op">)</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">viewName</span>, <span class="st">"Master"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">source_account</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 1 x 11</span></span>
<span><span class="co">##   accountId accountName internalWebProp… level websiteUrl type  starred webPropertyId</span></span>
<span><span class="co">##   &lt;chr&gt;     &lt;chr&gt;       &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt; &lt;lgl&gt;   &lt;chr&gt;        </span></span>
<span><span class="co">## 1 54516992  Demo Accou… 87479473         STAN… https://s… WEB   NA      UA-54516992-1</span></span>
<span><span class="co">## # … with 3 more variables: webPropertyName &lt;chr&gt;, viewId &lt;chr&gt;, viewName &lt;chr&gt;</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="get-a-list-of-the-goals-currently-configured-from-our-source-ga-view">2. Get a list of the goals currently configured from our source GA
view<a class="anchor" aria-label="anchor" href="#get-a-list-of-the-goals-currently-configured-from-our-source-ga-view"></a>
</h3>
<p>Now that we have the account summary, we can use the view details to
get a list of goal data, with each item in the list showing goal
details.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">source_goals</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_goal_list.html">ga_goal_list</a></span><span class="op">(</span><span class="va">source_account</span><span class="op">$</span><span class="va">accountId</span>, <span class="va">source_account</span><span class="op">$</span><span class="va">webPropertyId</span>, <span class="va">source_account</span><span class="op">$</span><span class="va">viewId</span><span class="op">)</span></span>
<span><span class="va">source_goals</span></span></code></pre></div>
<pre><code><span><span class="co">##   id accountId webPropertyId internalWebPropertyId profileId               name</span></span>
<span><span class="co">## 1  1  54516992 UA-54516992-1              87479473  92320289 Purchase Completed</span></span>
<span><span class="co">## 2  2  54516992 UA-54516992-1              87479473  92320289      Engaged Users</span></span>
<span><span class="co">## 3  3  54516992 UA-54516992-1              87479473  92320289      Registrations</span></span>
<span><span class="co">## 4  4  54516992 UA-54516992-1              87479473  92320289   Entered Checkout</span></span>
<span><span class="co">##   value active            type             created             updated</span></span>
<span><span class="co">## 1     0   TRUE URL_DESTINATION 2014-10-10 20:13:47 2016-11-10 23:07:35</span></span>
<span><span class="co">## 2     0   TRUE VISIT_NUM_PAGES 2015-02-23 16:18:06 2015-04-14 12:02:21</span></span>
<span><span class="co">## 3     0   TRUE URL_DESTINATION 2015-02-27 12:15:01 2016-07-26 16:14:09</span></span>
<span><span class="co">## 4     0   TRUE URL_DESTINATION 2015-07-20 23:57:22 2016-07-26 16:19:40</span></span>
<span><span class="co">##                                 urlDestinationDetails.url</span></span>
<span><span class="co">## 1                                  /ordercompleted\\.html</span></span>
<span><span class="co">## 2                                                    &lt;NA&gt;</span></span>
<span><span class="co">## 3                                 /registersuccess\\.html</span></span>
<span><span class="co">## 4 /yourinfo\\.html|/guestregister\\.html|/shipping\\.html</span></span>
<span><span class="co">##   urlDestinationDetails.caseSensitive urlDestinationDetails.matchType</span></span>
<span><span class="co">## 1                               FALSE                           REGEX</span></span>
<span><span class="co">## 2                                  NA                            &lt;NA&gt;</span></span>
<span><span class="co">## 3                               FALSE                           REGEX</span></span>
<span><span class="co">## 4                               FALSE                           REGEX</span></span>
<span><span class="co">##   urlDestinationDetails.firstStepRequired</span></span>
<span><span class="co">## 1                                    TRUE</span></span>
<span><span class="co">## 2                                      NA</span></span>
<span><span class="co">## 3                                   FALSE</span></span>
<span><span class="co">## 4                                   FALSE</span></span>
<span><span class="co">##                                                                                                                            urlDestinationDetails.steps</span></span>
<span><span class="co">## 1 1:4,c("Cart", "Billing and Shipping", "Payment", "Review"),c("/basket\\\\.html", "/yourinfo\\\\.html", "/payment\\\\.html", "/revieworder\\\\.html")</span></span>
<span><span class="co">## 2                                                                                                                                                     </span></span>
<span><span class="co">## 3                                                                                                                                                     </span></span>
<span><span class="co">## 4                                                                                                                                                     </span></span>
<span><span class="co">##   visitNumPagesDetails.comparisonType visitNumPagesDetails.comparisonValue</span></span>
<span><span class="co">## 1                                &lt;NA&gt;                                 &lt;NA&gt;</span></span>
<span><span class="co">## 2                        GREATER_THAN                                   10</span></span>
<span><span class="co">## 3                                &lt;NA&gt;                                 &lt;NA&gt;</span></span>
<span><span class="co">## 4                                &lt;NA&gt;                                 &lt;NA&gt;</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="retrieve-the-accountid-webpropertyid-and-viewid-from-our-destination-ga-view">3. Retrieve the accountId, webPropertyId and viewId from our
destination GA view<a class="anchor" aria-label="anchor" href="#retrieve-the-accountid-webpropertyid-and-viewid-from-our-destination-ga-view"></a>
</h3>
<p>We again filter the results from <code><a href="../reference/ga_account_list.html">ga_account_list()</a></code>, to
get account information for our destination GA property. In this
example, we filter for “Your_Account” and the view called
“Filtered”.</p>
<p>The <code>dest_account</code> dataframe should contain the same
columns and data types as your <code>source_account</code>
dataframe.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Account info for destination account</span></span>
<span><span class="va">dest_account</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_account_list.html">ga_account_list</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">accountName</span>, <span class="st">"Your_Account"</span><span class="op">)</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">viewName</span>, <span class="st">"Filtered"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-the-configuration-details-of-a-single-goal-to-be-copied-">4. Get the configuration details of a single goal to be copied.<a class="anchor" aria-label="anchor" href="#get-the-configuration-details-of-a-single-goal-to-be-copied-"></a>
</h3>
<p>For this first example, we add a single goal (ID 1) to the
destination view, passed as a list to the <a href="http://code.markedmondson.me/googleAnalyticsR/reference/ga_goal_add.html" class="external-link"><code>ga_goal_add()</code></a>
function.</p>
<p>We now use the <code><a href="../reference/ga_goal.html">ga_goal()</a></code> function to retrieve the goal
specifications as a list. We use <code><a href="../reference/ga_goal.html">ga_goal()</a></code> because it
provides the goal configuration data in the necessary format for our
<code>goal_add()</code> request.</p>
<p>In the example below, we retrieve the details for the goal in slot
1.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get goal ID 1</span></span>
<span><span class="va">goal_one</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_goal.html">ga_goal</a></span><span class="op">(</span><span class="va">source_account</span><span class="op">$</span><span class="va">accountId</span>, <span class="va">source_account</span><span class="op">$</span><span class="va">webPropertyId</span>, <span class="va">source_account</span><span class="op">$</span><span class="va">viewId</span>, </span>
<span>                    goalId <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># Strip out instance-specific metadata (property, profile, view data and original creation dates)</span></span>
<span>  <span class="fu">list.remove</span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"accountId"</span>, <span class="st">"webPropertyId"</span>, <span class="st">"selfLink"</span>, <span class="st">"internalWebPropertyId"</span>, <span class="st">"profileId"</span>, <span class="st">"parentLink"</span>, <span class="st">"created"</span>, <span class="st">"updated"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in list.remove(., c("accountId", "webPropertyId", "selfLink", "internalWebPropertyId", : could not find function "list.remove"</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">goal_one</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in eval(expr, envir, enclos): object 'goal_one' not found</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="submit-the-goal-details-to-our-destination-property-">5. Submit the goal details to our destination property.<a class="anchor" aria-label="anchor" href="#submit-the-goal-details-to-our-destination-property-"></a>
</h3>
<p>We can then use the goal details contained in <code>goal_one</code>
to submit a <code><a href="../reference/ga_goal_add.html">ga_goal_add()</a></code> request to our destination
property.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ga_goal_add.html">ga_goal_add</a></span><span class="op">(</span><span class="va">goal_one</span>, <span class="va">dest_account</span><span class="op">$</span><span class="va">accountId</span>, <span class="va">dest_account</span><span class="op">$</span><span class="va">webPropertyId</span>, <span class="va">dest_account</span><span class="op">$</span><span class="va">viewId</span><span class="op">)</span></span></code></pre></div>
<p>All being well, you should see console output containing the details
of your newly submitted goal in the destination property.</p>
<p>You can repeat the above steps for any goal IDs you’d like to copy
over, and to one or multiple destination views.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="copying-multiple-goals">Copying multiple goals<a class="anchor" aria-label="anchor" href="#copying-multiple-goals"></a>
</h2>
<p>Using the <a href="https://purrr.tidyverse.org/reference/map.html" class="external-link"><code>map()</code></a>
function from the <code>tidyverse</code>, we can quickly scale up this
approach. We can copy all goals from a view at once, rather than one at
a time.</p>
<p>First, we define a function to copy a single goal, given a goal ID,
details of the source view ID and destination view IDs. In effect, we
make a function to perform steps 1-5 from the “Copying a single goal”
section in this page.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Takes a goal ID, source account information &amp; dest account information, copies goal over</span></span>
<span><span class="va">copy_goal</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">goal_id</span>, <span class="va">source_df</span>, <span class="va">dest_df</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">source_goal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_goal.html">ga_goal</a></span><span class="op">(</span><span class="va">source_df</span><span class="op">$</span><span class="va">accountId</span>, <span class="va">source_df</span><span class="op">$</span><span class="va">webPropertyId</span>, <span class="va">source_df</span><span class="op">$</span><span class="va">viewId</span>, <span class="va">goal_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>    <span class="fu">list.remove</span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"accountId"</span>, <span class="st">"webPropertyId"</span>, <span class="st">"selfLink"</span>, <span class="st">"internalWebPropertyId"</span>, <span class="st">"profileId"</span>, <span class="st">"parentLink"</span>, <span class="st">"created"</span>, <span class="st">"updated"</span><span class="op">)</span><span class="op">)</span> </span>
<span>  <span class="fu"><a href="../reference/ga_goal_add.html">ga_goal_add</a></span><span class="op">(</span><span class="va">source_goal</span>, <span class="va">dest_df</span><span class="op">$</span><span class="va">accountId</span>, <span class="va">dest_df</span><span class="op">$</span><span class="va">webPropertyId</span>, <span class="va">dest_df</span><span class="op">$</span><span class="va">viewId</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Having our goal-copying function defined, it is a simple step to
apply it across all goal IDs from the source view.</p>
<p>The example below re-uses the <code>source_goals</code>,
<code>source_account</code> and <code>dest_account</code> objects which
were created earlier.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For each goal ID in our source view, apply the copy_goal function, </span></span>
<span><span class="co"># using source_account and dest_account account parameters as fixed 2nd / third arguments</span></span>
<span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">source_goals</span><span class="op">$</span><span class="va">id</span>, <span class="va">copy_goal</span>, <span class="va">source_account</span>, <span class="va">dest_account</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="write-request-limits">Write request limits<a class="anchor" aria-label="anchor" href="#write-request-limits"></a>
</h2>
<p>At the time of writing, there is a daily limit of 50 write requests
per day, per Google Cloud project, which restricts the number of times
this can be performed. However, it is possible to request that this
limit be increased.</p>
<p>For more information, check the Google documentation at <a href="https://developers.google.com/analytics/devguides/config/mgmt/v3/limits-quotas#write_requests" class="external-link uri">https://developers.google.com/analytics/devguides/config/mgmt/v3/limits-quotas#write_requests</a>.</p>
</div>
<div class="section level2">
<h2 id="remarketing-segments">Remarketing segments<a class="anchor" aria-label="anchor" href="#remarketing-segments"></a>
</h2>
<p>Remarketing segments lets you target users in Google Ads from Google
Analytics segments.</p>
<ul>
<li>
<code><a href="../reference/ga_remarketing_estimate.html">ga_remarketing_estimate()</a></code> - Estimate number of users
added to the segment yesterday</li>
<li>
<code><a href="../reference/ga_remarketing_get.html">ga_remarketing_get()</a></code> - Get a remarketing audience</li>
<li>
<code><a href="../reference/ga_remarketing_list.html">ga_remarketing_list()</a></code> - List remarketing audiences</li>
<li>
<code><a href="../reference/ga_remarketing_build.html">ga_remarketing_build()</a></code> - Create definitions to be used
within <code><a href="../reference/ga_remarketing_create.html">ga_remarketing_create()</a></code>
</li>
<li>
<code><a href="../reference/ga_remarketing_create.html">ga_remarketing_create()</a></code> - Create a remarketing
audience</li>
</ul>
<p>A demo of how you could use this based on your existing GA segments
is:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adword_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_adwords_list.html">ga_adwords_list</a></span><span class="op">(</span><span class="fl">123456</span>, <span class="st">"UA-123456-1"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adword_link</span> <span class="op">&lt;-</span> <span class="fu">ga_adword</span><span class="op">(</span><span class="va">adword_list</span><span class="op">$</span><span class="va">id</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">segment_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_segment_list.html">ga_segment_list</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">items</span><span class="op">$</span><span class="va">definition</span></span>
<span></span>
<span><span class="va">my_remarketing1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_remarketing_build.html">ga_remarketing_build</a></span><span class="op">(</span><span class="va">segment_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, </span>
<span>                      state_duration <span class="op">=</span> <span class="st">"TEMPORARY"</span>,</span>
<span>                      membershipDurationDays <span class="op">=</span> <span class="fl">90</span>, </span>
<span>                      daysToLookBack <span class="op">=</span> <span class="fl">14</span><span class="op">)</span></span>
<span><span class="va">my_remarketing2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ga_remarketing_build.html">ga_remarketing_build</a></span><span class="op">(</span><span class="va">segment_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>, </span>
<span>                      state_duration <span class="op">=</span> <span class="st">"PERMANENT"</span>,</span>
<span>                      membershipDurationDays <span class="op">=</span> <span class="fl">7</span>, </span>
<span>                      daysToLookBack <span class="op">=</span> <span class="fl">31</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># state based only can include exclusions</span></span>
<span><span class="fu"><a href="../reference/ga_remarketing_create.html">ga_remarketing_create</a></span><span class="op">(</span>adwords_link <span class="op">=</span> <span class="va">adword_link</span>,</span>
<span>                     include <span class="op">=</span> <span class="va">my_remarketing1</span>, exclude <span class="op">=</span> <span class="va">my_remarketing2</span>,</span>
<span>                     audienceType <span class="op">=</span> <span class="st">"STATE_BASED"</span>, name <span class="op">=</span> <span class="st">"my_remarketing_seg1"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="unsampled-reports">Unsampled reports<a class="anchor" aria-label="anchor" href="#unsampled-reports"></a>
</h2>
<p>Available only for GA360 accounts, you will need to authenticate with
the Google drive scope to get download access. The download functions
are contributed by <span class="citation">@j450h1</span></p>
<ul>
<li>
<code><a href="../reference/ga_unsampled.html">ga_unsampled()</a></code> - Get Unsampled Report Meta Data</li>
<li>
<code><a href="../reference/ga_unsampled_download.html">ga_unsampled_download()</a></code> - Download Unsampled Report
from Google Drive</li>
<li>
<code><a href="../reference/ga_unsampled_list.html">ga_unsampled_list()</a></code> - List Unsampled Reports</li>
</ul>
</div>
<div class="section level2">
<h2 id="users">Users<a class="anchor" aria-label="anchor" href="#users"></a>
</h2>
<ul>
<li>
<code><a href="../reference/ga_clientid_hash.html">ga_clientid_hash()</a></code> - Creates the clientID hash that is
used in BigQuery GA360 exports</li>
<li>
<code><a href="../reference/ga_clientid_deletion.html">ga_clientid_deletion()</a></code> - Delete a website visitor from
Google Analytics</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mark Edmondson.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>

<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>make_ga_4_req. googleAnalyticsR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container">
      <header>
      
<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">googleAnalyticsR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/setup.html">
    <span class="fa fa-wrench"></span>
     
    Setup
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Reporting API
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/v4.html">
        <span class="fa fa-cogs"></span>
         
        v4
      </a>
    </li>
    <li>
      <a href="../articles/v3.html">
        <span class="fa fa-cog"></span>
         
        v3
      </a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/big-query.html">
    <span class="fa fa-search"></span>
     
    Big Query
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Reporting
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/shiny.html">
        <span class="fa fa-cloud-upload"></span>
         
        Shiny
      </a>
    </li>
    <li>
      <a href="../articles/rmarkdown.html">
        <span class="fa fa-pencil-square"></span>
         
        RMarkdown
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../reference/index.html">
        <span class="fa fa-question-circle"></span>
         
        Reference
      </a>
    </li>
    <li>
      <a href="../news/index.html">
        <span class="fa fa-newspaper-o"></span>
         
        News
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
      
      </header>

      <div class="page-header">
  <h1>Make a Google Analytics v4 API fetch</h1>
</div>

<div class="row">
  <div class="col-md-9">
    
    <p>This function constructs the Google Analytics API v4 call to be called
  via <a href='fetch_google_analytics_4.html'>fetch_google_analytics_4</a></p>
    

    <pre><span class='fu'>make_ga_4_req</span>(<span class='no'>viewId</span>, <span class='kw'>date_range</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>metrics</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>dimensions</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dim_filters</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>met_filters</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>filtersExpression</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>order</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>segments</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>pivots</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>cohorts</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>pageToken</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>pageSize</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
  <span class='kw'>samplingLevel</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"DEFAULT"</span>, <span class='st'>"SMALL"</span>, <span class='st'>"LARGE"</span>), <span class='kw'>metricFormat</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>histogramBuckets</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2>Arguments</h2>
    <dl class="dl-horizontal">
      <dt>viewId</dt>
      <dd>viewId of data to get.</dd>
      <dt>date_range</dt>
      <dd>character or date vector of format <code>c(start, end)</code> or 
for two date ranges: <code>c(start1,end1,start2,end2)</code></dd>
      <dt>metrics</dt>
      <dd>Metric to fetch. Supports calculated metrics.</dd>
      <dt>dimensions</dt>
      <dd>Dimensions to fetch.</dd>
      <dt>dim_filters</dt>
      <dd>A <a href='filter_clause_ga4.html'>filter_clause_ga4</a> wrapping <a href='dim_filter.html'>dim_filter</a></dd>
      <dt>met_filters</dt>
      <dd>A <a href='filter_clause_ga4.html'>filter_clause_ga4</a> wrapping <a href='met_filter.html'>met_filter</a></dd>
      <dt>filtersExpression</dt>
      <dd>A v3 API style simple filter string. Not used with other filters.</dd>
      <dt>order</dt>
      <dd>An <a href='order_type.html'>order_type</a> object</dd>
      <dt>segments</dt>
      <dd>List of segments as created by <a href='segment_ga4.html'>segment_ga4</a></dd>
      <dt>pivots</dt>
      <dd>Pivots of the data as created by <a href='pivot_ga4.html'>pivot_ga4</a></dd>
      <dt>cohorts</dt>
      <dd>Cohorts created by <a href='make_cohort_group.html'>make_cohort_group</a></dd>
      <dt>pageToken</dt>
      <dd>Where to start the data fetch</dd>
      <dt>pageSize</dt>
      <dd>How many rows to fetch. Max 10000 each batch.</dd>
      <dt>samplingLevel</dt>
      <dd>Sample level</dd>
      <dt>metricFormat</dt>
      <dd>If supplying calculated metrics, specify the metric type</dd>
      <dt>histogramBuckets</dt>
      <dd>For numeric dimensions such as hour, a list of buckets of data.
See details in make_ga_4_req</dd>
    </dl>
    
    <div class="Metrics">
      <h2>Metrics</h2>

      <p></p>
      <p>Metrics support calculated metrics like ga:users / ga:sessions if you supply
  them in a named vector.</p>
      <p>You must supply the correct &#39;ga:&#39; prefix unlike normal metrics</p>
      <p>You can mix calculated and normal metrics like so:</p>
      <p><code>customMetric &lt;- c(sessionPerVisitor = &quot;ga:sessions / ga:visitors&quot;,
                          &quot;bounceRate&quot;,
                          &quot;entrances&quot;)</code></p>
      <p>You can also optionally supply a <code>metricFormat</code> parameter that must be
   the same length as the metrics.  <code>metricFormat</code> can be:
   <code>METRIC_TYPE_UNSPECIFIED, INTEGER, FLOAT, CURRENCY, PERCENT, TIME</code></p>
      <p>All metrics are currently parsed to as.numeric when in R.</p>
    </div>

    <div class="Dimensions">
      <h2>Dimensions</h2>

      <p></p>
      <p>Supply a character vector of dimensions, with or without <code>ga:</code> prefix.</p>
      <p>Optionally for numeric dimension types such as
  <code>ga:hour, ga:browserVersion, ga:sessionsToTransaction</code>, etc. supply
  histogram buckets suitable for histogram plots.</p>
      <p>If non-empty, we place dimension values into buckets after string to int64.
  Dimension values that are not the string representation of an integral value
  will be converted to zero. The bucket values have to be in increasing order.
  Each bucket is closed on the lower end, and open on the upper end.
  The &quot;first&quot; bucket includes all values less than the first boundary,
  the &quot;last&quot; bucket includes all values up to infinity.
  Dimension values that fall in a bucket get transformed to a new dimension
  value. For example, if one gives a list of &quot;0, 1, 3, 4, 7&quot;, then we
  return the following buckets: -
<ul>
<li> bucket #1: values &lt; 0, dimension value &quot;&lt;0&quot;
  </li>
<li> bucket #2: values in [0,1), dimension value &quot;0&quot;
  </li>
<li> bucket #3: values in [1,3), dimension value &quot;1-2&quot;
  </li>
<li> bucket #4: values in [3,4), dimension value &quot;3&quot;
  </li>
<li> bucket #5: values in [4,7), dimension value &quot;4-6&quot;
  </li>
<li> bucket #6: values &gt;= 7, dimension value &quot;7+&quot;
 </li>
</ul></p>
    </div>

    <div class="See also">
      <h2>See also</h2>

      <p>Other GAv4 fetch functions: <code><a href='fetch_google_analytics_4.html'>fetch_google_analytics_4</a></code>,
  <code><a href='google_analytics_4.html'>google_analytics_4</a></code></p>
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Not run: ------------------------------------</span>
<span class='co'># library(googleAnalyticsR)</span>
<span class='co'># </span>
<span class='co'># ## authenticate, </span>
<span class='co'># ## or use the RStudio Addin "Google API Auth" with analytics scopes set</span>
<span class='co'># ga_auth()</span>
<span class='co'># </span>
<span class='co'># ## get your accounts</span>
<span class='co'># account_list &lt;- google_analytics_account_list()</span>
<span class='co'># </span>
<span class='co'># ## pick a profile with data to query</span>
<span class='co'># </span>
<span class='co'># ga_id &lt;- account_list[23,'viewId']</span>
<span class='co'># </span>
<span class='co'># ga_req1 &lt;- make_ga_4_req(ga_id, </span>
<span class='co'>#                          date_range = c("2015-07-30","2015-10-01"),</span>
<span class='co'>#                          dimensions=c('source','medium'), </span>
<span class='co'>#                          metrics = c('sessions'))</span>
<span class='co'># </span>
<span class='co'># ga_req2 &lt;- make_ga_4_req(ga_id, </span>
<span class='co'>#                          date_range = c("2015-07-30","2015-10-01"),</span>
<span class='co'>#                          dimensions=c('source','medium'), </span>
<span class='co'>#                          metrics = c('users'))</span>
<span class='co'>#                          </span>
<span class='co'># fetch_google_analytics_4(list(ga_req1, ga_req2))</span>
<span class='co'># </span>
<span class='co'>## ---------------------------------------------</span></div></pre>
  </div>
  <div class="col-md-3">
  </div>
</div>

      <footer>
      <p>Built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>. Styled with <a href="http://getbootstrap.com">Bootstrap 3</a>.</p>
      </footer>
   </div>

  </body>
</html>

<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Authenticate with Google Analytics OAuth2 — ga_auth • googleAnalyticsR</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">googleAnalyticsR</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/website/setup.html">
    <span class="fa fa-wrench"></span>
     
    Setup
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Getting Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/website/v4.html">
        <span class="fa fa-cogs"></span>
         
        v4
      </a>
    </li>
    <li>
      <a href="../articles/website/v3.html">
        <span class="fa fa-cog"></span>
         
        v3
      </a>
    </li>
    <li>
      <a href="../articles/website/big-query.html">
        <span class="fa fa-search"></span>
         
        Big Query
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Reporting Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/website/shiny.html">
        <span class="fa fa-cloud-upload"></span>
         
        Shiny
      </a>
    </li>
    <li>
      <a href="../articles/website/rmarkdown.html">
        <span class="fa fa-pencil-square"></span>
         
        RMarkdown
      </a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Help
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../reference/index.html">
        <span class="fa fa-question-circle"></span>
         
        Reference
      </a>
    </li>
    <li>
      <a href="../news/index.html">
        <span class="fa fa-newspaper-o"></span>
         
        News
      </a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Authenticate with Google Analytics OAuth2</h1>
    </div>

    
    <p>A wrapper for <a href='https://code.markedmondson.me/googleAuthR//reference/gar_auth.html'>gar_auth</a> and <a href='https://code.markedmondson.me/googleAuthR//reference/gar_auth_service.html'>gar_auth_service</a></p>
    

    <pre class="usage"><span class='fu'>ga_auth</span>(<span class='kw'>token</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>new_user</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>no_auto</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>token</th>
      <td><p>An existing token or file location of a token to authenticate with</p></td>
    </tr>
    <tr>
      <th>new_user</th>
      <td><p>If TRUE, reauthenticate via Google login screen</p></td>
    </tr>
    <tr>
      <th>no_auto</th>
      <td><p>Skip auto authentication</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Invisibly, the token that has been saved to the session</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Run this function first time to authenticate with Google in your browser.</p>
<p>After initial authentication, a <code>.httr-oauth</code> will be saved to your working directory, where your authentication details are kept.  Keep this file safe.</p>
<p>If you want to reauthenticate, delete this file from your directory or run <code>ga_auth(new_user = TRUE)</code></p>
    
    <h2 class="hasAnchor" id="multiple-accounts"><a class="anchor" href="#multiple-accounts"></a>Multiple accounts</h2>

    
    <p>You can authenticate with a new auth file for each account. Supply argument <code>token</code> with the name of the cache file you want to use e.g. <code>ga_auth(token = "one.httr-oauth")</code> for one account, 
  <code>ga_auth(token = "another.httr-oauth")</code> for a different account.</p>
    
    <h2 class="hasAnchor" id="auto-authentication"><a class="anchor" href="#auto-authentication"></a>Auto-authentication</h2>

    
    <p>You can choose to auto-authenticate by moving your <code>.httr-oauth</code> or by 
  creating a Google OAuth service account JSON file.</p>
<p>Specify an environment variable in R via a <code>.Renviron</code> file or using Sys.setenv which point to the file location of your chosen authentication file.  See Startup</p>
<p>Once you have set the environment variable <code>GA_AUTH_FILE</code> to a valid file location,
  the function will look there for authentication details upon loading the library meaning 
  you will not need to call <code>ga_auth()</code> yourself as you would normally.</p>
<p>An example <code>.Renviron</code> file is below:
    <code>GA_AUTH_FILE = "/Users/bob/auth/googleAnalyticsR.httr-oauth"</code>
    <code>GA_AUTH_FILE</code> can be either a auth file for a token generated by <a href='https://code.markedmondson.me/googleAuthR//reference/gar_auth.html'>gar_auth</a> or
  service account JSON ending with file extension <code>.json</code></p>
    
    <h2 class="hasAnchor" id="your-own-google-project"><a class="anchor" href="#your-own-google-project"></a>Your own Google Project</h2>

    
    <p>Be default the Google Project used is shared by all users, so you may find it runs out of API calls.  
To mitigate that, create your own Google Project and turn on the Analytics APIs.</p>
<p>You can then create your own client ID and client secret, to place in options or environment arguments (whichever is easiest)</p>
<p>The environment args are below.  Similar to auto-authentication, you can place your entries in an <code>.Renviron</code> file
    <code>
GA_CLIENT_ID="XXXX"
GA_CLIENT_SECRET="XXX"
GA_WEB_CLIENT_ID="XXX"
GA_WEB_CLIENT_SECRET="XXX"
</code></p>
    
    <h2 class="hasAnchor" id="service-accounts"><a class="anchor" href="#service-accounts"></a>Service accounts</h2>

    
    <p>If you use the service account JSON, you will need to add the service account email 
  to your Google Analytics users to see data e.g. <code>xxxx@yyyyyy.iam.gserviceaccount.com</code></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#multiple-accounts">Multiple accounts</a></li>

      <li><a href="#auto-authentication">Auto-authentication</a></li>

      <li><a href="#your-own-google-project">Your own Google Project</a></li>

      <li><a href="#service-accounts">Service accounts</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Mark Edmondson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

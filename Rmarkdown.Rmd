---
title: "RMarkdown"
---

`googleAnalyticsR` can be used to generate reports in RMarkdown documents.

## Authentication with RMarkdown

Run your authentication in the setup block, making sure you have run the authentication first outside of RMarkdown, to ensure the necessary `.httr-oauth` file is in the same working directory as the RMarkdown document.

Multi-user login via Shiny is not available, as this needs to fetch authentication details from the URL which isn't possible in RMarkdown.

### Example

<pre class="markdown"><code>
---
title: "Google Analytics Report"
author: "Mark Edmondson"
date: "8 July 2016"
output: html_document
---

&#96;&#96;&#96;{r}
knitr::opts_chunk$set(echo = TRUE)
library(googleAnalyticsR)
## Make sure to run this at least once outside of the document to
##   ensure the .httr-oauth file is present. 
ga_auth()
&#96;&#96;&#96;
ga_data <- google_analytics_4(viewId = 12345, 
                              dateRange = c(Sys.Date()-30, Sys.Date()), 
                              metrics = "sessions",
                              dimensions = "medium")
                              
....use ga_data to generate plots/tables later in the document....
</code></pre>

Alternatively, you can use `googleAuthR::gar_auth_service()` and use the authenticaiton JSON downloaded from the Google console.

## Uploading RMarkdown files to Shinyapps.io/Shiny Server

To see the reports online, you can upload RMarkdown documents.  However, you need to ensure that the authentication file is also present.  This can be specified in the meta data:

<pre class="markdown"><code>
---
title: "Google Analytics Report"
author: "Mark Edmondson"
date: "8 July 2016"
output: html_document
resource_files:
  - .httr-oauth
---
</code></pre>

Then when you upload to Shiny Server or shinyapps.io, you should see the file in your upload choices:

![](auth_token_markdown.png.png)